"use strict";function init(){scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(45,windowWidth/windowHeight,.1,1e3),camera.position.set(100,100,100),scene.add(camera),renderer=new THREE.WebGLRenderer({antialias:!0}),renderer.setSize(windowWidth,windowHeight),container=document.getElementById("lamab"),container.appendChild(renderer.domElement);var e=new THREE.PointLight(16777215);e.position.set(0,500,0),scene.add(e);var n="images/bg/",a=".jpg",t=[n+"another-xpos"+a,n+"another-xneg"+a,n+"another-ypos"+a,n+"another-yneg"+a,n+"another-zpos"+a,n+"another-zneg"+a],o=(new THREE.CubeTextureLoader).load(t);o.format=THREE.RGBFormat,o.mapping=THREE.CubeRefractionMapping;var r=new THREE.BoxGeometry(1e3,1e3,1e3),i=THREE.ShaderLib.cube,c=new THREE.ShaderMaterial({fragmentShader:i.fragmentShader,vertexShader:i.vertexShader,uniforms:i.uniforms,depthWrite:!1,side:THREE.BackSide});c.uniforms.tCube.value=o;var s=new THREE.Mesh(r,c);scene.add(s);var m=30,d=512,l=512,u=document.createElement("canvas"),w=document.createElement("canvas"),g=document.createElement("canvas"),h=document.createElement("canvas"),E=document.createElement("canvas"),p=document.createElement("canvas");u.width=d,u.height=l,w.width=d,w.height=l,g.width=d,g.height=l,h.width=d,h.height=l,E.width=d,E.height=l,p.width=d,p.height=l;var v=u.getContext("2d"),b=w.getContext("2d"),H=g.getContext("2d"),f=h.getContext("2d"),y=E.getContext("2d"),T=p.getContext("2d"),R=new Image;R.crossOrigin="anonymous",R.src="http://ericmotil.com/la-mab/images/cubeFace1.svg",R.onload=function(){v.drawImage(R,0,0)};var M=new Image;M.crossOrigin="anonymous",M.src="http://ericmotil.com/la-mab/images/cubeFace2.svg",M.onload=function(){b.drawImage(M,0,0)};var k=new Image;k.crossOrigin="anonymous",k.src="http://ericmotil.com/la-mab/images/cubeFace3.svg",k.onload=function(){H.drawImage(k,0,0)};var x=new Image;x.crossOrigin="anonymous",x.src="http://ericmotil.com/la-mab/images/cubeFace4.svg",x.onload=function(){f.drawImage(x,0,0)};var C=new Image;C.crossOrigin="anonymous",C.src="http://ericmotil.com/la-mab/images/cubeFace5.svg",C.onload=function(){y.drawImage(C,0,0)};var L=new Image;L.crossOrigin="anonymous",L.src="http://ericmotil.com/la-mab/images/cubeFace6.svg",L.onload=function(){T.drawImage(L,0,0)};var I=new THREE.MeshBasicMaterial({map:new THREE.Texture(u),transparent:!0});I.map.needsUpdate=!0;var B=new THREE.MeshBasicMaterial({map:new THREE.Texture(w),transparent:!0});B.map.needsUpdate=!0;var W=new THREE.MeshBasicMaterial({map:new THREE.Texture(g),transparent:!0});W.map.needsUpdate=!0;var D=new THREE.MeshBasicMaterial({map:new THREE.Texture(h),transparent:!0});D.map.needsUpdate=!0;var F=new THREE.MeshBasicMaterial({map:new THREE.Texture(E),transparent:!0});F.map.needsUpdate=!0;var S=new THREE.MeshBasicMaterial({map:new THREE.Texture(p),transparent:!0});S.map.needsUpdate=!0;var X=new THREE.CubeGeometry(m+1,m+1,m+1),Y=[I,B,W,D,F,S],O=new THREE.MultiMaterial(Y);cubeLink=new THREE.Mesh(X,O),scene.add(cubeLink),cubeLink.position.set(0,0,0),cubeLink.doubleSided=!0;var z=new THREE.BoxGeometry(m,m,m),U=new THREE.MeshBasicMaterial({color:16777215,wireframe:!1,envMap:o,refractionRatio:.85});cube=new THREE.Mesh(z,U),cube.position.set(0,0,0),scene.add(cube),raycaster=new THREE.Raycaster,mouse=new THREE.Vector2,window.addEventListener("resize",onWindowResize,!1),document.addEventListener("mousemove",onDocumentMouseMove,!1),document.addEventListener("mousedown",onDocumentMouseDown,!1),document.addEventListener("touchstart",onDocumentTouchStart,!1),document.addEventListener("touchmove",onDocumentTouchMove,!1)}function onWindowResize(){windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function raycastFaces(){mouse.x=event.clientX/renderer.domElement.clientWidth*2-1,mouse.y=2*-(event.clientY/renderer.domElement.clientHeight)+1,raycaster.setFromCamera(mouse,camera);var e=raycaster.intersectObject(cubeLink);if(e.length>0){var n=e[0].face.materialIndex;switch(n){case 0:console.log("face 1"),window.open("http://google.com","_blank","","");break;case 1:console.log("face 2"),window.open("http://google.com","_blank","","");break;case 2:console.log("face 3"),window.open("http://google.com","_blank","","");break;case 3:console.log("face 4"),window.open("http://google.com","_blank","","");break;case 4:console.log("face 5"),window.open("http://google.com","_blank","","");break;case 5:console.log("face 6"),window.open("http://google.com","_blank","","");break;default:event.preventDefault()}}}function onDocumentMouseDown(e){e.preventDefault(),raycastFaces()}function onDocumentMouseMove(e){mouse.x=e.clientX/renderer.domElement.clientWidth*2-1,mouse.y=2*-(e.clientY/renderer.domElement.clientHeight)+1,raycaster.setFromCamera(mouse,camera);var n=raycaster.intersectObject(cubeLink);n.length>0?document.body.style.cursor="pointer":document.body.style.cursor="move",mouseCameraX=.05*(e.clientX-windowHalfX),mouseCameraY=.05*(e.clientY-windowHalfY)}function onDocumentTouchStart(e){raycastFaces()}function onDocumentTouchMove(e){1===e.touches.length&&e.preventDefault()}function animate(){requestAnimationFrame(animate),render()}function render(){renderer.render(scene,camera),camera.position.x+=.015*(mouseCameraX-camera.position.x),camera.position.y+=.015*(-mouseCameraY-camera.position.y),cube.rotation.x+=.015,cube.rotation.y+=.015,cubeLink.rotation.x+=.015,cubeLink.rotation.y+=.015}var container,scene,camera,renderer,controls,stats,cube,cubeLink,raycaster,mouse,mouseCameraX=0,mouseCameraY=0,windowWidth=window.innerWidth,windowHeight=window.innerHeight,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2;init(),animate();var modal=document.getElementById("myModal"),btn=document.getElementById("btn-overlay"),span=document.getElementsByClassName("close")[0];btn.onclick=function(){modal.style.display="block"},span.onclick=function(){modal.style.display="none"},modal.onclick=function(){modal.style.display="none"},window.onclick=function(e){e.target==modal&&(modal.style.display="none")};